{"ast":null,"code":"var _jsxFileName = \"/Users/nhilai/Documents/GitHub/CapstoneEyes/frontend/src/Screens/signupScreen/signupScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport SignupForm from '../../Components/Signupform/SignupForm';\nimport { useNavigate } from 'react-router-dom';\nimport axiosInstance from '../../axios';\nimport axios, { AxiosError } from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function SignUpScreen() {\n  _s();\n\n  const history = useNavigate();\n  const [user, setUser] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\"\n  });\n  const [repeatPassword, setRepeatPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const Signup = (details, repeatPassword) => {\n    console.log(details.email);\n\n    if (details.email === '' || details.username === '' || details.password === '' || repeatPassword === '') {\n      setError('Please fill in the required details');\n    } else {\n      if (details.password !== repeatPassword) {\n        console.log(\"unmatched password\");\n        setError(\"Unmatched password. Please try again!\");\n      } else if (details.password.length < 8) {\n        setError(\"The password must contain at least 8 characters\");\n      } else {\n        console.log(\"Matched password\");\n        axiosInstance.post('user/create/', {\n          email: details.email,\n          user_name: details.username,\n          password: details.password\n        }).then(res => {\n          history('/login');\n          console.log('Logged in');\n          console.log(res);\n          console.log(res.data);\n        }).catch(err => {\n          console.log(err);\n\n          if (err.response.data.non_field_errors[0] === 'This email already exists') {\n            setError('This email already exists. Please try again!');\n          } else if (err.response.data.non_field_errors[0] === 'This username already exists') {\n            setError('This username already exists. Please try again!');\n          } else {\n            console.error(err); // }\n          }\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(SignupForm, {\n      Signup: Signup,\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 7\n  }, this);\n}\n\n_s(SignUpScreen, \"AL6Bq+u+OXN1x+WFOPaSZlOAxlM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = SignUpScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpScreen\");","map":{"version":3,"sources":["/Users/nhilai/Documents/GitHub/CapstoneEyes/frontend/src/Screens/signupScreen/signupScreen.js"],"names":["React","useState","SignupForm","useNavigate","axiosInstance","axios","AxiosError","SignUpScreen","history","user","setUser","username","email","password","repeatPassword","setRepeatPassword","error","setError","Signup","details","console","log","length","post","user_name","then","res","data","catch","err","response","non_field_errors"],"mappings":"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","sourcesContent":["\nimport React, {useState} from 'react';\nimport SignupForm from '../../Components/Signupform/SignupForm';\nimport {useNavigate} from 'react-router-dom'\nimport axiosInstance from '../../axios';\nimport axios, { AxiosError } from 'axios';\n\nexport function SignUpScreen(){\n\n  const history = useNavigate();\n  const [user, setUser] = useState({username: \"\", email: \"\", password: \"\"});\n  const [repeatPassword, setRepeatPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  \n  const Signup = (details, repeatPassword) => {\n      console.log(details.email);\n      if ((details.email === '') || (details.username === '') || (details.password === '') || (repeatPassword === '')){\n        setError('Please fill in the required details')\n      }\n      else{\n        if (details.password !== repeatPassword){\n                console.log(\"unmatched password\")\n                setError(\"Unmatched password. Please try again!\")\n        } else if (details.password.length <8){\n            setError(\"The password must contain at least 8 characters\")\n        } else {\n                console.log(\"Matched password\");\n                axiosInstance\n                    .post('user/create/', {\n                        email: details.email,\n                        user_name: details.username,\n                        password: details.password,\n                    }) \n\n                    .then((res) => {\n                        history('/login')\n                        console.log('Logged in')\n                        console.log(res)\n                        console.log(res.data)\n                    }).catch((err) => {\n                        console.log(err)\n                        if (err.response.data.non_field_errors[0] === 'This email already exists'){\n                            setError('This email already exists. Please try again!')\n                        } else if (err.response.data.non_field_errors[0] === 'This username already exists'){\n                            setError('This username already exists. Please try again!')\n                        } else{\n                            console.error(err)\n                // }\n            }})\n    }}\n  }\n\n  return(\n      <div className = \"App\">\n          <SignupForm Signup={Signup} error = {error}/>    \n      </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}